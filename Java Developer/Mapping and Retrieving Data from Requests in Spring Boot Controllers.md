[![spring-boot-logo.png](https://i.postimg.cc/8kd0mzMk/spring-boot-logo-2.png)](https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-requestmapping.html)

## Урок: Мэппинг и получение данных из запросов в контроллерах Spring Boot

### 1. Вступление

Контроллеры — это ключевой элемент любой веб-приложения, построенной на базе Spring Boot. Они являются интерфейсом между клиентом и сервером и управляют передачей данных через HTTP-запросы. Умение настраивать и управлять контроллерами критически важно для разработчиков веб-приложений, которые используют Spring Boot.

На этом уроке мы разберем, как настраивать мэппинг HTTP-запросов в контроллерах Spring Boot, а также как извлекать и обрабатывать данные, которые приходят с этими запросами. Эти знания помогут вам создавать более гибкие и эффективные приложения, работающие по принципу REST.

### 2. Основная часть урока

#### 2.1. Что такое контроллер в Spring Boot?

Контроллер — это Java-класс, который управляет поступающими HTTP-запросами и отвечает за передачу данных обратно пользователю или клиенту. Spring Boot использует аннотации для того, чтобы связать запросы с методами контроллеров. Основной аннотацией является `@RestController`, которая указывает Spring, что данный класс будет обрабатывать HTTP-запросы.

```java
@RestController
public class MyController {
    // Методы обработки запросов
}
```

#### 2.2. Мэппинг запросов

Мэппинг запросов — это процесс связывания HTTP-запроса с конкретным методом контроллера. Spring Boot предлагает несколько аннотаций для мэппинга:

- `@RequestMapping` — универсальная аннотация для обработки любого HTTP-запроса (GET, POST, PUT, DELETE).
- `@GetMapping`, `@PostMapping`, `@PutMapping`, `@DeleteMapping` — специализированные аннотации для обработки конкретных типов запросов.

**Пример:**

```java
@RestController
@RequestMapping("/api")
public class MyController {

    @GetMapping("/hello")
    public String hello() {
        return "Hello, World!";
    }
}
```

Здесь метод `hello()` обрабатывает GET-запрос по адресу `/api/hello`.

#### 2.3. Получение данных из запросов

Важной частью работы с контроллерами является извлечение данных из HTTP-запросов. Рассмотрим основные аннотации для этого:

##### 2.3.1. @RequestParam

Используется для извлечения данных из параметров запроса (query parameters). Это обычно те данные, которые идут после символа `?` в URL.

```java
@GetMapping("/greet")
public String greet(@RequestParam(name = "name", defaultValue = "Guest") String name) {
    return "Hello, " + name;
}
```

**Пример запроса:** `GET /greet?name=John`  
**Результат:** `"Hello, John"`

##### 2.3.2. @PathVariable

Эта аннотация используется для извлечения данных из переменных пути (path variables). Они являются частью самого URL.

```java
@GetMapping("/user/{id}")
public String getUserById(@PathVariable("id") Long userId) {
    return "User ID: " + userId;
}
```

**Пример запроса:** `GET /user/123`  
**Результат:** `"User ID: 123"`

##### 2.3.3. @RequestBody

Используется для получения данных из тела запроса (например, JSON) и автоматической их конвертации в объекты Java.

```java
@PostMapping("/users")
public User createUser(@RequestBody User user) {
    return user;
}
```

**Пример запроса:** `POST /users` с телом запроса:

```json
{
  "id": 1,
  "firstName": "John",
  "lastName": "Doe",
  "age": 25
}
```

**Результат:** объект `User` будет передан методу `createUser`.

##### 2.3.4. @RequestHeader

Эта аннотация используется для извлечения данных из заголовков HTTP-запроса.

```java
@GetMapping("/header")
public String getHeader(@RequestHeader("User-Agent") String userAgent) {
    return "User-Agent: " + userAgent;
}
```

**Пример запроса:**  
**Результат:** Вывод заголовка `User-Agent`.

#### 2.4. Подведение итогов урока

1. **Контроллеры в Spring Boot** являются ключевыми компонентами, обрабатывающими HTTP-запросы и формирующими ответы. Аннотация `@RestController` указывает, что класс является контроллером и обрабатывает запросы.

2. **Мэппинг HTTP-запросов** — это процесс связывания HTTP-запросов с методами контроллера. В Spring Boot используются аннотации `@RequestMapping` для универсального мэппинга, а также специализированные аннотации `@GetMapping`, `@PostMapping`, `@PutMapping`, `@DeleteMapping` для конкретных типов запросов.

3. **Извлечение данных из запросов** возможно с использованием аннотаций:
   - **@RequestParam**: Извлекает данные из параметров запроса (query parameters), например, `GET /greet?name=John` использует параметр `name`.
   - **@PathVariable**: Извлекает данные из переменных пути, например, `GET /user/123` использует `id` как часть пути.
   - **@RequestBody**: Извлекает данные из тела запроса, часто в формате JSON, и автоматически конвертирует их в объекты Java.
   - **@RequestHeader**: Позволяет получать значения заголовков HTTP-запроса, таких как `User-Agent`.

4. **Гибкость и эффективность**: Знание этих методов мэппинга и извлечения данных позволяет разработчикам создавать гибкие и эффективные веб-приложения с использованием Spring Boot, реализующие принципы REST и легко обрабатывающие различные типы запросов и данных.

#### 2.5. Практические задания

1. **Задание 1**: Создайте контроллер с методом, который принимает GET-запрос и возвращает персонализированное приветствие в зависимости от параметра `name`.  
   
   **Подсказка:** Используйте `@RequestParam`.

2. **Задание 2**: Создайте контроллер, который принимает POST-запрос с данными пользователя в формате JSON и возвращает его возраст.  
   
   **Подсказка:** Используйте `@RequestBody`.

3. **Задание 3**: Реализуйте метод, который будет принимать переменную пути (например, ID пользователя) и возвращать это значение.  
   
   **Подсказка:** Используйте `@PathVariable`.

### 3. Выводы

Сегодня мы изучили ключевые аспекты работы с контроллерами в Spring Boot. Вы узнали, как настраивать мэппинг запросов с помощью аннотаций, а также как извлекать данные из различных частей HTTP-запросов: параметров, переменных пути, тела запроса и заголовков. Теперь вы можете уверенно разрабатывать контроллеры для обработки данных в веб-приложениях на базе Spring Boot.

Продолжайте практиковаться с реальными примерами и усложняйте свои задачи, чтобы глубже освоить материал и подготовиться к разработке сложных приложений.

### 4. Контрольное тестирование

Тестирование помогает закрепить знания, полученные на уроке. Проходя тесты, вы можете увидеть, насколько хорошо усвоили материал, выявить пробелы в понимании и скорректировать свое обучение. Это важный шаг к закреплению навыков и подготовке к более сложным задачам.

Этот тест построен на базе Google Forms и поможет проверить ваше понимание ключевых аспектов работы с контроллерами в Spring Boot.

#### Инструкция по прохождению теста:

1. Перед началом теста вам будет предложено ввести свой адрес электронной почты. Убедитесь, что вы указали правильный и действующий адрес, так как результаты теста будут отправлены на указанный адрес.

2. Тест состоит из **20 вопросов**. Каждый вопрос относится к материалу, который был представлен в уроке.

3. У каждого вопроса есть **три варианта ответа**. Только один из них является правильным.

4. Для каждого вопроса выберите **один правильный ответ**. Пожалуйста, убедитесь, что вы выбрали один ответ, прежде чем переходить к следующему вопросу.

5. Результаты теста будут автоматически направлены в почту, указанную при регистрации.

#### Удачи! 

[Пройти тест](https://forms.gle/ThAcBTWHqr1hAUYY7)

--- 

**На следующем уроке** мы углубимся в создание REST API и разберем, как обрабатывать различные HTTP-методы и статус-коды ответов.
